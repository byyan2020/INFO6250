{"version":3,"file":"app.js","mappings":"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","sources":["webpack://08-js-service-calls/./src/constants.js","webpack://08-js-service-calls/./src/listener.js","webpack://08-js-service-calls/./src/render.js","webpack://08-js-service-calls/./src/services.js","webpack://08-js-service-calls/./src/state.js","webpack://08-js-service-calls/webpack/bootstrap","webpack://08-js-service-calls/webpack/runtime/define property getters","webpack://08-js-service-calls/webpack/runtime/hasOwnProperty shorthand","webpack://08-js-service-calls/webpack/runtime/make namespace object","webpack://08-js-service-calls/./src/app.js"],"sourcesContent":["export const SERVER = {\r\n    AUTH_MISSING: 'auth-missing',\r\n}\r\n\r\nexport const CLIENT = {\r\n    NETWORK_ERROR: 'networkError',\r\n    NO_SESSION: 'noSession',\r\n}\r\n\r\nexport const MESSAGES = {\r\n    [CLIENT.NETWORK_ERROR]: 'Network problems. Please try again',\r\n    [CLIENT.NO_SESSION]: 'No login session. Please login',\r\n    [CLIENT.AUTH_MISSING]: 'Auth missing. Please login again',\r\n    default: 'Something went wrong. Please try again',\r\n}","import { fetchLogin, fetchLogout, fetchPostWord, fetchWord } from \"./services\";\r\nimport render from \"./render\";\r\nimport { login, logout, setError, setWord } from \"./state\";\r\nimport { SERVER, CLIENT } from './constants';\r\n\r\nexport function addLoginListener({ state, appEl }) {\r\n\tappEl.addEventListener(\"submit\", (e) => {\r\n\t\te.preventDefault();\r\n\t\tif (!e.target.classList.contains(\"login-form\")) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst username = appEl.querySelector(\".login-username\").value;\r\n\t\t// Service call to login\r\n\t\tfetchLogin(username)\r\n\t\t\t.then(({username}) => {\r\n\t\t\t\tlogin(username);\r\n\t\t\t\trender({ state, appEl });\r\n                return fetchWord();\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\tsetError(err?.error || \"ERROR\");\r\n\t\t\t\trender({ state, appEl });\r\n\t\t\t})\r\n            // Get word from fetchWord service and render the page\r\n            .then( response => {\r\n                setWord(response.storedWord);\r\n                render({ state, appEl });\r\n            })\r\n            // Catch fetchWord error\r\n            .catch( err => {\r\n                // Catch no session error\r\n                if ( err?.error == CLIENT.NO_SESSION ) {\r\n                    logout();\r\n                    render({ state, appEl });\r\n                    return\r\n                }\r\n                // Catch unpected error\r\n                setError(err?.error || \"ERROR\");\r\n                render({ state, appEl });\r\n            })\r\n            \r\n\t});\r\n}\r\n\r\nexport function addLogoutListener({ state, appEl }) {\r\n\tappEl.addEventListener(\"submit\", (e) => {\r\n\t\te.preventDefault();\r\n\t\tif (!e.target.classList.contains(\"logout-form\")) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlogout();\r\n\t\trender({ state, appEl });\r\n\t\tfetchLogout().catch((err) => {\r\n\t\t\tsetError(err?.error || \"ERROR\");\r\n\t\t\trender({ state, appEl });\r\n\t\t});\r\n\t});\r\n}\r\n\r\nexport function addWordListenser({ state, appEl }) {\r\n    appEl.addEventListener(\"submit\", (e) => {\r\n\t\te.preventDefault();\r\n\t\tif (!e.target.classList.contains(\"word-form\")) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst word = appEl.querySelector(\".word-input\").value;\r\n\t\t// Service call to update word\r\n\t\tfetchPostWord(word)\r\n\t\t\t.then(({storedWord}) => {\r\n\t\t\t\tsetWord(storedWord);\r\n\t\t\t\trender({ state, appEl });\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\tsetError(err?.error || \"ERROR\");\r\n\t\t\t\trender({ state, appEl });\r\n\t\t\t});\r\n\t});\r\n}\r\n","function render({ state, appEl }) {\r\n\tconst html = `\r\n    ${getErrorHtml(state)}\r\n    ${getLoginHtml(state)}\r\n    ${getLogoutHtml(state)}\r\n    ${getWordHtml(state)}\r\n    `;\r\n\tappEl.innerHTML = html;\r\n}\r\n\r\nfunction getLoginHtml(state) {\r\n\tif (state.isLoggedIn) {\r\n\t\treturn \"\";\r\n\t}\r\n\treturn `\r\n    <div class=\"login\">\r\n        <form class=\"login-form\" action=\"#/login\">\r\n            <label class=\"form-label\">\r\n                <span>Username:</span>\r\n                <input class=\"login-username\" name=\"username\"/>\r\n            </label>\r\n            <button type=\"submit\" class=\"form-btn\">Submit</button>\r\n        </form>\r\n    </div>\r\n    `;\r\n}\r\n\r\nfunction getLogoutHtml(state) {\r\n\tif (!state.isLoggedIn) {\r\n\t\treturn \"\";\r\n\t}\r\n\treturn `\r\n    <div class=\"logout\">\r\n        <form class=\"logout-form\" action=\"#/logout\">\r\n            <button type=\"submit\" class=\"logout-btn\">Logout</button>\r\n        </form>\r\n    </div>\r\n    `;\r\n}\r\n\r\nfunction getWordHtml(state) {\r\n    if (!state.isLoggedIn) {\r\n\t\treturn \"\";\r\n\t}\r\n\treturn `\r\n    <div class=\"word\">\r\n        <p>Username: ${state.username}</p>\r\n        <p>Stored Word: ${state.word}</p>\r\n        <form class=\"word-form\" action=\"#/store\">\r\n            <label>\r\n                <span>Update your stored word: </span>\r\n                <input class=\"word-input\" name=\"storedWord\"/>\r\n            </label>\r\n            <button class=\"form-btn\" type=\"submit\">Submit</button>\r\n        </form>\r\n    </div>\r\n    `\r\n}\r\n\r\nfunction getErrorHtml(state) {\r\n    return `\r\n    <div class=\"error\">${state.error}</div>\r\n`;\r\n}\r\n\r\nexport default render;\r\n","// This is a sample file that demonstrates\r\n// how you can write an abstraction around\r\n// a fetch() call\r\n// This exported function returns a promise\r\n// that resolves with data\r\n// or rejects with an error object\r\n//\r\n// The caller of this function can decide\r\n// what to do with the data\r\n// or what to do with the error\r\n//\r\n// You can add to this file and use this function\r\n// or write your own files/functions\r\nexport function fetchSession() {\r\n    return fetch('/api/session', {\r\n        method: \"GET\",\r\n    })\r\n    .catch(() => Promise.reject({ error: \"networkError\" }))\r\n    .then( response => {\r\n        if (response.ok) {\r\n            return response.json()\r\n        }\r\n        return response.json()\r\n        .catch( error => Promise.reject({ error }) )\r\n        .then( err => Promise.reject(err) )\r\n    })\r\n}\r\n\r\n\r\nexport function fetchLogin(username) {\r\n  return fetch('/api/session/', {\r\n    method: 'POST',\r\n    headers: {\r\n      'content-type': 'application/json', // set this header when sending JSON in the body of request\r\n    },\r\n    body: JSON.stringify( { username } ),\r\n  })\r\n  // fetch() rejects on network error\r\n  // So we convert that to a formatted error object\r\n  // so our caller can handle all \"errors\" in a similar way\r\n  .catch( err => Promise.reject({ error: 'network-error' }) )\r\n  .then( response => {\r\n    if(!response.ok) {  // response.ok checks the status code from the service\r\n      // This service returns JSON on errors,\r\n      // so we use that as the error object and reject\r\n      return response.json().then( err => Promise.reject(err) );\r\n    }\r\n    return response.json(); // happy status code means resolve with data from service\r\n  });\r\n}\r\n\r\nexport function fetchLogout() {\r\n    return fetch('/api/session', {\r\n        method: 'DELETE',\r\n    })\r\n    .catch( err => Promise.reject({ error: 'netword-error' }))\r\n    .then( response => {\r\n        if (!response.ok) {\r\n            return response.json().then(err => Promise.reject(err))\r\n        }\r\n        return response.json();\r\n    })\r\n}\r\n\r\nexport function fetchWord() {\r\n    return fetch('/api/word', {\r\n        method: \"GET\",\r\n    })\r\n    .catch(() => Promise.reject({ error: \"networkError\" }))\r\n    .then( response => {\r\n        if(!response.ok) {  \r\n            return response.json().then( err => Promise.reject(err) );\r\n          }\r\n          return response.json();\r\n    })  \r\n}\r\n\r\nexport function fetchPostWord(word) {\r\n    return fetch('/api/word', {\r\n        method: 'POST',\r\n        headers: {\r\n            'content-type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ word }),\r\n    })\r\n    .catch( err => Promise.reject({ error: \"networkError\" }))\r\n    .then( response => {\r\n        if (!response.ok) {\r\n            return response.json().then( err => Promise.reject(err) );\r\n        }\r\n        return response.json();\r\n    })\r\n}\r\n\r\n\r\n\r\n","import { MESSAGES } from \"./constants\";\r\n\r\nconst state = {\r\n\tword: \"\",\r\n\tisLoggedIn: false,\r\n\tusername: \"\",\r\n\terror: \"\",\r\n};\r\n\r\nexport function login(username) {\r\n\tstate.isLoggedIn = true;\r\n\tstate.username = username;\r\n\tstate.error = \"\";\r\n}\r\n\r\nexport function logout() {\r\n\tstate.isLoggedIn = false;\r\n\tstate.username = \"\";\r\n\tstate.word = \"\";\r\n\tstate.error = \"\";\r\n}\r\n\r\nexport function setWord(word) {\r\n    state.word = word;\r\n    state.error = \"\";\r\n}\r\n\r\nexport function setError(error) {\r\n    state.error = MESSAGES[error] || MESSAGES.default;\r\n}\r\n\r\nexport default state;\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import state, {\r\n    login,\r\n    logout,\r\n    setWord,\r\n    setError\r\n} from './state'\r\nimport { fetchSession, fetchLogin, fetchWord } from \"./services\";\r\nimport { SERVER, CLIENT } from './constants';\r\nimport render from \"./render\";\r\nimport { addLoginListener, addLogoutListener, addWordListenser } from './listener';\r\n\r\nconst appEl = document.querySelector('#app');\r\nrender({ state, appEl });\r\naddLoginListener({ state, appEl });\r\naddLogoutListener({ state, appEl });\r\naddWordListenser({ state, appEl });\r\ncheckForSession();\r\n\r\n\r\nfunction checkForSession() {\r\n    fetchSession()\r\n    // Session exists\r\n    .then( session => {\r\n        login(session.username);\r\n        render({ state, appEl });\r\n        return fetchWord();\r\n    })\r\n    // Catch fetchSession error\r\n    .catch( err => {\r\n        // Catch no session error\r\n        if (err?.error === SERVICE.AUTH_MISSING ) {\r\n            return Promise.reject({ error: CLIENT.NO_SESSION })\r\n        }\r\n        // Catch other session\r\n        return Promise.reject(err);\r\n    })\r\n    // Get word from fetchWord service and render the page\r\n    .then( response => {\r\n        setWord(response.storedWord);\r\n        render({ state, appEl });\r\n    })\r\n    // Catch fetchWord error\r\n    .catch( err => {\r\n        // Catch no session error\r\n        if ( err?.error == CLIENT.NO_SESSION ) {\r\n            logout();\r\n            render({ state, appEl });\r\n            return\r\n        }\r\n        // Catch unpected error\r\n        setError(err?.error || \"ERROR\");\r\n        render({ state, appEl });\r\n    })\r\n\r\n}"],"names":["SERVER","AUTH_MISSING","CLIENT","NETWORK_ERROR","NO_SESSION","MESSAGES","_MESSAGES","_defineProperty","fetchLogin","fetchLogout","fetchPostWord","fetchWord","render","login","logout","setError","setWord","addLoginListener","_ref","state","appEl","addEventListener","e","preventDefault","target","classList","contains","username","querySelector","value","then","_ref2","err","error","response","storedWord","addLogoutListener","_ref3","addWordListenser","_ref4","word","_ref5","html","concat","getErrorHtml","getLoginHtml","getLogoutHtml","getWordHtml","innerHTML","isLoggedIn","fetchSession","fetch","method","Promise","reject","ok","json","headers","body","JSON","stringify","document","checkForSession","session","SERVICE"],"sourceRoot":""}
{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://project2/./src/constants.js","webpack://project2/./src/listeners.js","webpack://project2/./src/render.js","webpack://project2/./src/services.js","webpack://project2/./src/state.js","webpack://project2/../samples/services-todo/src/render.js","webpack://project2/webpack/bootstrap","webpack://project2/webpack/runtime/define property getters","webpack://project2/webpack/runtime/hasOwnProperty shorthand","webpack://project2/webpack/runtime/make namespace object","webpack://project2/./src/main.js"],"sourcesContent":["export const SERVER = {\r\n  AUTH_MISSING: 'auth-missing',\r\n  AUTH_INSUFFICIENT: 'auth-insufficient',\r\n  REQUIRED_USERNAME: 'required-username',\r\n  REQUIRED_MESSAGE: 'required-message',\r\n};\r\n\r\nexport const CLIENT = {\r\n  NETWORK_ERROR: 'networkError',\r\n  NO_SESSION: 'noSession',\r\n};\r\n\r\nexport const MESSAGES = {\r\n  [CLIENT.NETWORK_ERROR]: 'Trouble connecting to the network.  Please try again',\r\n  [SERVER.AUTH_INSUFFICIENT]: 'Your username/password combination does not match any records, please try again.',\r\n  [SERVER.REQUIRED_USERNAME]: 'Please enter a valid (letters and/or numbers) username',\r\n  [SERVER.REQUIRED_MESSAGE]: 'Please enter message to send',\r\n  default: 'Something went wrong.  Please try again',\r\n};\r\n","import {\r\n\tfetchLogin,\r\n\tfetchLoginUsers,\r\n\tfetchLogout,\r\n\tfetchMessages,\r\n\tfetchPostMessage,\r\n} from \"./services\";\r\nimport { renderApp, renderChat } from \"./render\";\r\nimport { login, logout, setError, setLoginUsers, setMessages, waitOnChat } from \"./state\";\r\n\r\nexport function addLoginListener({ state, appEl, chatEl }) {\r\n\tappEl.addEventListener(\"submit\", (e) => {\r\n\t\te.preventDefault();\r\n\t\tif (!e.target.classList.contains(\"login-form\")) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst username = appEl.querySelector(\".login-username\").value;\r\n    waitOnChat();\r\n    renderApp({ state, appEl })\r\n\t\t// Service call to login\r\n\t\tfetchLogin(username)\r\n\t\t\t.then((users) => {\r\n\t\t\t\tlogin(username);\r\n\t\t\t\tsetLoginUsers(users);\r\n\t\t\t\trenderApp({ state, appEl });\r\n\t\t\t\trenderChat({ state, chatEl });\r\n\t\t\t\treturn fetchMessages();\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n        return Promise.reject(err);\r\n\t\t\t})\r\n\t\t\t// Fetch all messages\r\n\t\t\t.then((messages) => {\r\n\t\t\t\tsetMessages(messages);\r\n\t\t\t\trenderChat({ state, chatEl });\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n        logout();\r\n\t\t\t\tsetError(err?.error || \"ERROR\");\r\n\t\t\t\trenderApp({ state, appEl });\r\n\t\t\t});\r\n\t});\r\n}\r\n\r\nexport function addLogoutListener({ state, appEl, chatEl }) {\r\n\tappEl.addEventListener(\"submit\", (e) => {\r\n\t\te.preventDefault();\r\n\t\tif (!e.target.classList.contains(\"logout-form\")) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlogout();\r\n\t\trenderApp({ state, appEl });\r\n\t\trenderChat({ state, chatEl });\r\n\t\tfetchLogout().catch((err) => {\r\n\t\t\tsetError(err?.error || \"ERROR\");\r\n\t\t\trenderApp({ state, appEl });\r\n\t\t});\r\n\t});\r\n}\r\n\r\nexport function addPostMessageListener({ state, appEl, chatEl }) {\r\n\tappEl.addEventListener(\"submit\", (e) => {\r\n\t\tif (!e.target.classList.contains(\"chat-form\")) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet message = appEl.querySelector(\".message\").value;\r\n\t\tfetchPostMessage(message)\r\n\t\t\t.then((messages) => {\r\n\t\t\t\tsetMessages(messages);\r\n        renderApp({ state, appEl });\r\n\t\t\t\trenderChat({ state, chatEl });\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\tconsole.log(err);  \r\n\t\t\t\tsetError(err?.error || \"ERROR\"); // Ensure that the error ends up truthy\r\n\t\t\t\trenderApp({ state, appEl });\r\n\t\t\t});\r\n\t});\r\n}\r\n","export function renderApp({ state, appEl}) {\r\n\tconst html = `\r\n    ${getErrorHtml(state)}\r\n    <div class=\"login-info\">\r\n    ${getLoginHtml(state)}\r\n    ${getLogoutHtml(state)}\r\n    </div>\r\n    ${getOutgoingHtml(state)}\r\n    ${getLoadingHtml(state)}\r\n    `;\r\n\tappEl.innerHTML = html;\r\n}\r\n\r\nexport function renderChat({ state, chatEl }) {\r\n\tconst html = `\r\n    ${getUserList(state)}\r\n    ${getMessageList(state)}\r\n    `;\r\n\tchatEl.innerHTML = html;\r\n}\r\n\r\nfunction getErrorHtml( state ) {\r\n  if (!state.error) {\r\n\t\treturn \"\";\r\n\t}\r\n  return `\r\n      <div class=\"error\">${state.error}</div>\r\n  `;\r\n}\r\n\r\nfunction getLoadingHtml( state ) {\r\n  if (state.isChatPending) {\r\n    return `\r\n    <div class=\"waiting\">Loading Chat...</div>\r\n  `\r\n  }\r\n  return ``\r\n}\r\n\r\nfunction getLoginHtml(state) {\r\n  if(state.isLoginPending) {\r\n    return `\r\n      <div class=\"waiting\">Loading user...</div>\r\n    `\r\n  }\r\n\tif (state.isLoggedIn) {\r\n\t\treturn `<div class=\"login-user\">${state.username}</div>`;\r\n\t}\r\n\treturn `\r\n    <div class=\"login\">\r\n        <form class=\"login-form\" action=\"#/login\">\r\n            <label class=\"form-label\">\r\n                <span>Username:</span>\r\n                <input class=\"login-username\" name=\"username\"/>\r\n            </label>\r\n            <button type=\"submit\" class=\"form-btn\">Submit</button>\r\n        </form>\r\n    </div>\r\n    `;\r\n}\r\n\r\nfunction getLogoutHtml(state) {\r\n\tif (!state.isLoggedIn) {\r\n\t\treturn \"\";\r\n\t}\r\n\treturn `\r\n    <div class=\"logout\">\r\n        <form class=\"logout-form\" action=\"#/logout\">\r\n            <button type=\"submit\" class=\"logout-btn\">Logout</button>\r\n        </form>\r\n    </div>\r\n    `;\r\n}\r\n\r\nfunction getOutgoingHtml(state) {\r\n\tif (!state.isLoggedIn) {\r\n\t\treturn \"\";\r\n\t}\r\n\treturn `\r\n    <div class=\"outgoing\">\r\n        <form class=\"chat-form\" action=\"/chat\" method=\"POST\">\r\n            <input class=\"message\" name=\"message\" value=\"\" placeholder=\"Enter message to send\"/>\r\n            <button type=\"submit\">Send</button>\r\n        </form>\r\n    </div>\r\n    `;\r\n}\r\n\r\nfunction getMessageList(state) {\r\n\tif (!state.isLoggedIn) {\r\n\t\treturn \"\";\r\n\t}\r\n  if (state.isLoginPending) {\r\n    return `\r\n    <div class=\"waiting\">Loading Messages...</div>\r\n  `\r\n  }\r\n\tconst { messages } = state;\r\n\tif (!messages) {\r\n\t\treturn \"\";\r\n\t}\r\n\treturn (\r\n\t\t`<ol class=\"messages\">\r\n    <h1>Messages</h2>\r\n    ` +\r\n\t\tmessages\r\n\t\t\t.map(\r\n\t\t\t\t(message) => `\r\n        <li>\r\n          <div class=\"message\">\r\n            <div class=\"sender-info\">\r\n                <img class=\"avatar\" alt=\"avatar of ${message.sender}\" src=\"http://placekitten.com/150/150\"/>\r\n                <span class=\"username\">${message.sender}</span>\r\n            </div>\r\n            <p class=\"message-text\">${message.text}</p>\r\n          </div>\r\n        </li>\r\n      `\r\n\t\t\t)\r\n\t\t\t.join(\"\") +\r\n\t\t`</ol>`\r\n\t);\r\n}\r\n\r\nfunction getUserList(state) {\r\n\tif (!state.isLoggedIn) {\r\n\t\treturn \"\";\r\n\t}\r\n\treturn (\r\n\t\t`\r\n    <ul class=\"users\">\r\n    <h1>Current Login Users</h2>\r\n    ` +\r\n\t\tObject.values(state.users)\r\n\t\t\t.map(\r\n\t\t\t\t(user) => `\r\n            <li>\r\n                <div class=\"user\">\r\n                  <img class=\"avatar\" alt=\"avatar of ${user}\" src=\"http://placekitten.com/150/150\"/>\r\n                  <span class=\"username\">${user}</span>\r\n                </div>\r\n            </li>\r\n            `\r\n\t\t\t)\r\n\t\t\t.join(\"\") +\r\n\t\t`</ul>`\r\n\t);\r\n}\r\n","export function fetchLogin(username) {\r\n\treturn fetch(\"/api/v1/session\", {\r\n\t\tmethod: \"POST\",\r\n\t\theaders: new Headers({\r\n\t\t\t\"content-type\": \"application/json\",\r\n\t\t}),\r\n\t\tbody: JSON.stringify({ username }),\r\n\t})\r\n\t\t.catch(() => Promise.reject({ error: \"network-error\" }))\r\n\t\t.then((response) => {\r\n\t\t\tif (!response.ok) {\r\n\t\t\t\treturn response.json().then((err) => Promise.reject(err));\r\n\t\t\t}\r\n\t\t\treturn response.json();\r\n\t\t});\r\n}\r\n\r\nexport function fetchLogout() {\r\n\treturn fetch(\"/api/v1/session\", {\r\n\t\tmethod: \"DELETE\",\r\n\t})\r\n\t\t.catch((err) => Promise.reject({ error: \"network-error\" }))\r\n\t\t.then((response) => {\r\n\t\t\tif (!response.ok) {\r\n\t\t\t\treturn response.json().then((err) => Promise.reject(err));\r\n\t\t\t}\r\n\t\t\treturn response.json();\r\n\t\t});\r\n}\r\n\r\nexport function fetchSession() {\r\n\treturn fetch(\"/api/v1/session\", {\r\n\t\tmethod: \"GET\",\r\n\t})\r\n\t\t.catch(() => Promise.reject({ error: \"networkError\" }))\r\n\t\t.then((response) => {\r\n\t\t\tif (response.ok) {\r\n\t\t\t\treturn response.json();\r\n\t\t\t}\r\n\t\t\treturn response\r\n\t\t\t\t.json()\r\n\t\t\t\t.catch((error) => Promise.reject({ error }))\r\n\t\t\t\t.then((err) => Promise.reject(err));\r\n\t\t});\r\n}\r\n\r\nexport function fetchLoginUsers() {\r\n\treturn fetch(\"/api/v1/users\", {\r\n\t\tmethod: \"GET\",\r\n\t})\r\n\t\t.catch((err) => Promise.reject({ error: \"network-error\" }))\r\n\t\t.then((response) => {\r\n\t\t\tif (response.ok) {\r\n\t\t\t\treturn response.json();\r\n\t\t\t}\r\n\t\t\treturn response\r\n\t\t\t\t.json()\r\n\t\t\t\t.catch((error) => Promise.reject({ error }))\r\n\t\t\t\t.then((err) => [Promise.reject(err)]);\r\n\t\t});\r\n}\r\n\r\nexport function fetchMessages() {\r\n\treturn fetch(\"/api/v1/messages\", {\r\n\t\tmethod: \"GET\",\r\n\t})\r\n\t\t.catch((err) => Promise.reject({ error: \"network-error\" }))\r\n\t\t.then((response) => {\r\n\t\t\tif (response.ok) {\r\n\t\t\t\treturn response.json();\r\n\t\t\t}\r\n\t\t\treturn response\r\n\t\t\t\t.json()\r\n\t\t\t\t.catch((error) => Promise.reject({ error }))\r\n\t\t\t\t.then((err) => [Promise.reject(err)]);\r\n\t\t});\r\n}\r\n\r\nexport function fetchPostMessage(message) {\r\n\treturn fetch(\"/api/v1/messages\", {\r\n\t\tmethod: \"POST\",\r\n\t\theaders: {\r\n\t\t\t\"content-type\": \"application/json\",\r\n\t\t},\r\n\t\tbody: JSON.stringify({ message }),\r\n\t})\r\n\t\t.catch((err) => Promise.reject({ error: \"network-error\" }))\r\n\t\t.then((response) => {\r\n\t\t\tif (!response.ok) {\r\n\t\t\t\treturn response.json().then((err) => Promise.reject(err));\r\n\t\t\t}\r\n\t\t\treturn response.json();\r\n\t\t});\r\n}\r\n","import { MESSAGES } from \"./constants\";\r\n\r\nconst state = {\r\n\tisLoggedIn: false,\r\n  isLoginPending: false,\r\n  isChatPending: false,\r\n\tusername: \"\",\r\n\terror: \"\",\r\n\tusers: {\r\n\t\t// \"Amit\": \"Amit\",\r\n\t\t// \"Bob\": \"Bob\",\r\n\t},\r\n\tmessages: [\r\n\t\t// { sender: \"Amit\", text: \"You up?\" },\r\n\t\t// { sender: \"Bao\", text: \"Good\" },\r\n\t],\r\n};\r\n\r\nexport function waitOnLogin() {\r\n  state.isLoggedIn = false;\r\n  state.isLoginPending = true;\r\n  state.username = '';\r\n  state.users = {};\r\n  state.messages = [];\r\n  state.error = '';\r\n}\r\n\r\nexport function login(username) {\r\n\tstate.isLoggedIn = true;\r\n  state.isLoginPending = false;\r\n\tstate.username = username;\r\n\tstate.error = \"\";\r\n}\r\n\r\nexport function logout() {\r\n\tstate.isLoggedIn = false;\r\n  state.isLoginPending = false;\r\n\r\n\tstate.username = \"\";\r\n\tstate.error = \"\";\r\n}\r\n\r\nexport function waitOnChat() {\r\n  state.users = {};\r\n  state.messages = [];\r\n  state.isChatPending = true\r\n  state.error = '';\r\n}\r\n\r\nexport function setLoginUsers(data) {\r\n  state.isChatPending = false\r\n\tstate.users = data;\r\n  state.error = \"\";\r\n}\r\n\r\nexport function setMessages(data) {\r\n  state.isChatPending = false\r\n\tstate.messages = data;\r\n  state.error = \"\";\r\n}\r\n\r\nexport function setError(error) {\r\n  if(!error) {\r\n    state.error = '';\r\n    return;\r\n  }\r\n  state.error = MESSAGES[error] || MESSAGES.default;\r\n  state.isLoginPending = false;\r\n  state.isChatPending = false\r\n}\r\n\r\nexport default state;\r\n","// Here we rebuild ALL the HTML whenever the state changes\r\n// That is not the most efficient way to do it\r\n// We COULD make these functions smarter about noticing what state changed\r\n// and what HTML is dependent on that state\r\n// and only replace the HTML that needs to be replaced\r\n// but we'll be moving to React soon where someone has already written that\r\n// The key part here is to see how the HTML is based on state\r\n// - at this stage, the \"action\" is not visible, only the state\r\n// - so our render is decoupled from the actions and events\r\n\r\nfunction render({ state, appEl }) {\r\n  const html = `\r\n   <main class=\"\">\r\n     ${ generateStatusHtml( state ) }\r\n     ${ generateLoginHtml( state ) }\r\n     ${ generateContentHtml( state ) }\r\n   </main>\r\n  `;\r\n  appEl.innerHTML = html;\r\n}\r\n\r\nfunction generateStatusHtml( state ) {\r\n  return `\r\n      <div class=\"status\">${state.error}</div>\r\n  `;\r\n}\r\n\r\nfunction generateLoginHtml( state ) {\r\n  if(state.isLoginPending) {\r\n    return `\r\n      <div class=\"login__waiting\">Loading user...</div>\r\n    `\r\n  }\r\n  if(state.isLoggedIn) {\r\n    return ``;\r\n  }\r\n\r\n  // The #/login below isn't \"real\" - the form should never navigate\r\n  // I included it merely as a hint to what the form does\r\n  return `\r\n      <div class=\"login\">\r\n        <form class=\"login__form\" action=\"#/login\">\r\n          <label>\r\n            <span>Username:</span>\r\n            <input class=\"login__username\" value=\"\">\r\n          </label>\r\n          <button class=\"login__button\" type=\"submit\">Login</button>\r\n        </form>\r\n      </div>\r\n  `;\r\n}\r\n\r\nfunction generateContentHtml( state ) {\r\n  if(!state.isLoggedIn) {\r\n    return ``;\r\n  }\r\n  if(state.isTodoPending) {\r\n    return `\r\n      <div class=\"content\">\r\n        ${generateControlsHtml( state )}\r\n        <div class=\"todos__waiting\">Loading Todos...</div>\r\n      </div>\r\n    `;\r\n  }\r\n  return `\r\n      <div class=\"content\">\r\n        ${generateControlsHtml( state )}\r\n        <ul class=\"todos\">${generateTodosHtml( state )}</ul>\r\n        ${generateAddTodoHtml( state )}\r\n      </div>\r\n  `;\r\n}\r\n\r\nfunction generateControlsHtml( state ) {\r\n  return `\r\n        <div class=\"controls\">\r\n          <button class=\"controls__refresh\">Refresh</button>\r\n          <button class=\"controls__logout\">Logout</button>\r\n        </div>\r\n  `;\r\n}\r\n\r\nfunction generateTodosHtml( state ) {\r\n  const todosHtml = Object.values(state.todos).map( todo => {\r\n    const isDoneClass = todo.done ? \"todo__text--complete\" : \"\";\r\n    const isAddedClass = state.lastAddedTodoId === todo.id ? \"todo__text--added\" : \"\";\r\n    return `\r\n      <li class=\"todo\">\r\n        <label\r\n        >\r\n          <input\r\n            class=\"todo__toggle\"\r\n            data-id=\"${todo.id}\"\r\n            type=\"checkbox\"\r\n            ${todo.done ? \"checked\" : \"\"}\r\n          >\r\n          <span\r\n            data-id=\"${todo.id}\"\r\n            class=\"todo__toggle todo__text ${ isDoneClass } ${isAddedClass} \"\r\n          >\r\n            ${todo.task}\r\n          </span>\r\n        </label>\r\n        <button\r\n          data-id=\"${todo.id}\"\r\n          class=\"todo__delete\"\r\n        >\r\n          &#10060;\r\n        </button>\r\n      </li>\r\n      `;\r\n  }).join('') || `<p>No Todo Items yet, add one!</p>`;\r\n  return todosHtml;\r\n}\r\n\r\nfunction generateAddTodoHtml( state ) {\r\n  return `\r\n        <form class=\"add__form\" action=\"#/add\">\r\n          <input class=\"add__task\">\r\n          <button type=\"submit\" class=\"add__button\">Add</button>\r\n        </form>\r\n  `;\r\n}\r\n\r\nexport default render;\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { renderChat, renderApp } from \"./render\";\r\nimport state, { login, logout, setLoginUsers, setMessages, setError, waitOnLogin } from \"./state\";\r\nimport { addLoginListener, addLogoutListener, addPostMessageListener } from \"./listeners\";\r\nimport { SERVER, CLIENT } from \"./constants\";\r\nimport { fetchSession, fetchLoginUsers, fetchMessages } from \"./services\";\r\nimport render from \"../../samples/services-todo/src/render\";\r\n\r\nconst appEl = document.querySelector(\"#app\");\r\nconst chatEl = document.querySelector(\"#chat\")\r\nrenderApp({ state, appEl });\r\nrenderChat({ state, chatEl });\r\naddLoginListener({ state, appEl, chatEl });\r\naddLogoutListener({ state, appEl, chatEl });\r\naddPostMessageListener({ state, appEl, chatEl });\r\ncheckForSession();\r\npollData();\r\n\r\n// Polling\r\nfunction pollData() {\r\n\trefreshData();\r\n\tsetTimeout(pollData, 5000);\r\n}\r\n\r\nfunction refreshData() {\r\n\tif (!state.isLoggedIn) {\r\n\t\treturn;\r\n\t}\r\n\tfetchLoginUsers()\r\n\t\t.then((users) => {\r\n\t\t\tsetLoginUsers(users);\r\n\t\t\trenderChat({ state, chatEl });\r\n\t\t\treturn fetchMessages();\r\n\t\t})\r\n    .catch((err) =>  Promise.reject(err))\r\n\t\t.then((messages) => {\r\n\t\t\tsetMessages(messages);\r\n\t\t\trenderChat({ state, chatEl });\r\n\t\t})\r\n\t\t.catch((err) => {\r\n\t\t\tsetError(err?.error || \"ERROR\");\r\n\t\t\trenderApp({ state, appEl });\r\n\t\t});\r\n}\r\n\r\nfunction checkForSession() {\r\n  waitOnLogin()\r\n  renderApp({ state, appEl })\r\n\t// Fetch current user\r\n\tfetchSession()\r\n\t\t.then((session) => {\r\n\t\t\tlogin(session.username);\r\n\t\t\trenderApp({ state, appEl });\r\n\t\t\treturn fetchLoginUsers();\r\n\t\t})\r\n\t\t.catch((err) => {\r\n\t\t\tif (err?.error === SERVER.AUTH_MISSING) {\r\n\t\t\t\treturn Promise.reject({ error: CLIENT.NO_SESSION });\r\n\t\t\t}\r\n\t\t\treturn Promise.reject(err);\r\n\t\t})\r\n\t\t// Fetch login users\r\n\t\t.then((users) => {\r\n\t\t\tsetLoginUsers(users);\r\n\t\t\trenderChat({ state, chatEl });\r\n\t\t\treturn fetchMessages();\r\n\t\t})\r\n\t\t.catch((err) => {\r\n\t\t\tif (err?.error == CLIENT.NO_SESSION) {\r\n\t\t\t\tlogout();\r\n\t\t\t\trenderApp({ state, appEl });\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tsetError(err?.error || \"ERROR\");\r\n\t\t\trenderApp({ state, appEl });\r\n\t\t})\r\n\t\t// Fetch all messages\r\n\t\t.then((messages) => {\r\n\t\t\tsetMessages(messages);\r\n\t\t\trenderChat({ state, chatEl });\r\n\t\t})\r\n\t\t.catch((err) => {\r\n\t\t\tsetError(err?.error || \"ERROR\");\r\n\t\t\trenderApp({ state, appEl });\r\n\t\t});\r\n}\r\n"],"names":["SERVER","AUTH_MISSING","AUTH_INSUFFICIENT","REQUIRED_USERNAME","REQUIRED_MESSAGE","CLIENT","NETWORK_ERROR","NO_SESSION","MESSAGES","_MESSAGES","_defineProperty","fetchLogin","fetchLoginUsers","fetchLogout","fetchMessages","fetchPostMessage","renderApp","renderChat","login","logout","setError","setLoginUsers","setMessages","waitOnChat","addLoginListener","_ref","state","appEl","chatEl","addEventListener","e","preventDefault","target","classList","contains","username","querySelector","value","then","users","err","Promise","reject","messages","error","addLogoutListener","_ref2","addPostMessageListener","_ref3","message","console","log","html","concat","getErrorHtml","getLoginHtml","getLogoutHtml","getOutgoingHtml","getLoadingHtml","innerHTML","getUserList","getMessageList","isChatPending","isLoginPending","isLoggedIn","map","sender","text","join","Object","values","user","fetch","method","headers","Headers","body","JSON","stringify","response","ok","json","fetchSession","waitOnLogin","data","render","generateStatusHtml","generateLoginHtml","generateContentHtml","isTodoPending","generateControlsHtml","generateTodosHtml","generateAddTodoHtml","todosHtml","todos","todo","isDoneClass","done","isAddedClass","lastAddedTodoId","id","task","document","checkForSession","pollData","refreshData","setTimeout","session"],"sourceRoot":""}